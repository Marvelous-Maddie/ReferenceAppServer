(this.webpackJsonpclienttest=this.webpackJsonpclienttest||[]).push([[0],{130:function(e,t,a){e.exports=a(443)},442:function(e,t,a){},443:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a(47),s=a(67),l={get:function(e){var t={method:"GET",headers:i(e)};return fetch(e,t).then(u)},post:function(e,t){var a={method:"POST",headers:Object(s.a)({"Content-Type":"application/json"},i(e)),credentials:"include",body:JSON.stringify(t)};return fetch(e,a).then(u)},put:function(e,t){var a={method:"PUT",headers:Object(s.a)({"Content-Type":"application/json"},i(e)),body:JSON.stringify(t)};return fetch(e,a).then(u)},delete:function(e){var t={method:"DELETE",headers:i(e)};return fetch(e,t).then(u)}};function i(e){var t=window.account,a=t&&t.jwtToken,n=e.startsWith("http://localhost:4000");return a&&n?(console.log("Token added"),console.log(window.account),{Authorization:"Bearer ".concat(t.jwtToken)}):{}}function u(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var m=a(23),d=Object(m.a)(),f="Admin";var p="Success",b="Error",v="Info",E="Warning",h=a(1),g=a(3),w=a.n(g),N=a(5),j="".concat("http://localhost:4000","/accounts"),O={login:function(e,t){return l.post("".concat(j,"/authenticate"),{email:e,password:t})},logout:function(){l.post("".concat(j,"/revoke-token"),{}),d.push("/")},refreshToken:function(){return l.post("".concat(j,"/refresh-token"),{})},register:function(e){return l.post("".concat(j,"/register"),e)},verifyEmail:function(e){return l.post("".concat(j,"/verify-email"),{token:e})},forgotPassword:function(e){return l.post("".concat(j,"/forgot-password"),{email:e})},validateResetToken:function(e){return l.post("".concat(j,"/validate-reset-token"),{token:e})},resetPassword:function(e){var t=e.token,a=e.password,n=e.confirmPassword;return l.post("".concat(j,"/reset-password"),{token:t,password:a,confirmPassword:n})},getAll:function(){return l.get(j)},getById:function(e){return l.get("".concat(j,"/").concat(e))},create:function(e){return l.post(j,e)},update:function(e,t){return console.log(t),l.put("".concat(j,"/").concat(e),t)},delete:function(e){return l.delete("".concat(j,"/").concat(e)).then((function(e){return e}))}};var y="".concat("http://localhost:4000","/pages"),k={getAll:function(){var e=Object(N.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y);case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getById:function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"/"+t);case 2:return a=e.sent,e.next=5,a.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.post("".concat(y),t),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.put("".concat(y,"/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),delete:function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.delete("".concat(y,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S="".concat("http://localhost:4000","/comments"),x=function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.put("".concat(S,"/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P={create:function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.post("".concat(S,"/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),update:x,delete:function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.delete("".concat(S,"/").concat(t,"/").concat(a._id));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},A="".concat("http://localhost:4000","/files/upload"),C={uploadFile:function(){var e=Object(N.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("file upload service"),e.prev=1,e.next=4,fetch(A,{method:"POST",body:t});case 4:return a=e.sent,e.next=7,a.json();case 7:return a=e.sent,console.log(a),n='&lt;img src="'+a+'" width="10%" &gt;',e.abrupt("return",n);case 13:return e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},T={pStore:{pages:[],page:null,comment:null,addLoadedPages:Object(h.b)((function(e,t){e.pages=t})),createComment:Object(h.b)((function(e,t){var a={content:"",userName:t.userName,userId:t.id};e.comment=a})),createPage:Object(h.b)((function(e){e.page={title:"New Page Title",slug:"newPage",subtitle:"",content:"",comments:[]}})),removePage:Object(h.b)((function(e,t){e.pages=e.pages.filter((function(e){return e._id!==t._id})),e.page=null})),editComment:Object(h.b)((function(e,t){e.comment=t})),clearComment:Object(h.b)((function(e){e.comment=null})),setPage:Object(h.b)((function(e,t){e.page=t,e.pages=e.pages.map((function(e){return e._id===t._id?t:e}))})),addPage:Object(h.b)((function(e,t){e.pages.push(t),e.page=t})),replaceComment:Object(h.b)((function(e,t){e.page.comments=e.page.comments.map((function(e){return e._id===t._id?t:e}))})),removeComment:Object(h.b)((function(e,t){e.page.comments=e.page.comments.filter((function(e){return e._id!==t._id}))})),addComment:Object(h.b)((function(e,t){e.page.comments.push(t)})),loadPages:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:n=e.sent,t.addLoadedPages(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),loadPage:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a,n){var r,c,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),c=r.pages.find((function(e){return e.slug===a}))){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,k.getById(c._id);case 6:o=e.sent,t.setPage(o);case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),updatePageContent:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a,n){var r,c,o,s,l,i,u,m;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a._id,c=a.slug,o=a.title,s=a.subtitle,l=a.content,i={slug:c,title:o,subtitle:s,content:l},!r){e.next=9;break}return e.next=5,k.update(r,i);case 5:u=e.sent,t.setPage(u),e.next=13;break;case 9:return e.next=11,k.create(i);case 11:m=e.sent,t.addPage(m);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),deletePage:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a._id){e.next=4;break}return e.next=3,k.delete(a._id);case 3:t.removePage(a);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),saveComment:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a,n){var r,c,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),console.log(a),!a._id){e.next=10;break}return console.log(r.page._id),e.next=6,P.update(r.page._id,a);case 6:c=e.sent,t.replaceComment(c),e.next=14;break;case 10:return e.next=12,P.create(r.page._id,a);case 12:o=e.sent,t.addComment(o);case 14:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()),deleteComment:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),!a._id){e.next=5;break}return e.next=4,P.delete(r.page._id,a);case 4:t.removeComment(a);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}())},aStore:{accounts:[],account:null,editAccount:null,refreshTokenTimeout:null,refreshToken:null,addAccount:Object(h.b)((function(e,t){e.account=t,e.refreshToken=null===t||void 0===t?void 0:t.jwtToken,window.account=t})),addNewAccount:Object(h.b)((function(e,t){e.accounts.push(t),e.editAccount=t})),setAccount:Object(h.b)((function(e,t){console.log("Account",t),e.account=t,e.refreshToken=null===t||void 0===t?void 0:t.jwtToken,e.editAccount=t,window.account=t})),setEditAccount:Object(h.b)((function(e,t){e.editAccount=t})),replaceAccount:Object(h.b)((function(e,t){e.accounts=e.accounts.map((function(e){return e.id!==t.id&&e.id?e:t})),e.account.id!==t.id&&e.account.id||(e.account=t,e.refreshToken=null===t||void 0===t?void 0:t.jwtToken,e.editAccount=t)})),removeAccount:Object(h.b)((function(e,t){var a=e.accounts.filter((function(e){return e.id!==t}));e.account.id===t&&(e.account=a,e.editAccount=a)})),setAccounts:Object(h.b)((function(e,t){e.accounts=t})),clearAccount:Object(h.b)((function(e){e.account=null,e.refreshToken=null,window.account=null})),login:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.email,r=a.password,console.log(n),e.next=4,O.login(n,r);case 4:c=e.sent,t.setAccount(c);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),logout:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.logout();case 2:t.clearAccount();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),refreshTheToken:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.refreshToken();case 2:n=e.sent,t.setAccount(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),register:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.register(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),verifyEmail:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.verifyEmail(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),forgotPassword:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.forgotPassword(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),validateResetToken:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.validateResetToken(a);case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),resetPassword:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.token,r=a.password,c=a.confirmPassword,e.next=3,O.resetPassword(n,r,c);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),getAllAccounts:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAll();case 2:a=e.sent,t.setAccounts(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),getAccountById:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getById(a);case 2:n=e.sent,t.setEditAccount(n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),createAccount:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,O.create(a);case 3:n=e.sent,console.log(n),t.addNewAccount(n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),updateAccount:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){var n,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.id,r=a.params,e.next=3,O.update(n,r);case 3:c=e.sent,t.replaceAccount(c);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),deleteAccount:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.delete(a);case 2:t.removeAccount(a);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},iStore:{alerts:[],setAlertInternal:Object(h.b)((function(e,t){e.alerts.push(t)})),removeAlert:Object(h.b)((function(e,t){e.alerts=e.alerts.filter((function(e){return e.id!==t.id}))})),clear:Object(h.b)((function(e){e.alerts=[]})),alert:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.id=Math.floor(1e4*Math.random()),a.autoClose=void 0===a.autoClose||a.autoClose,t.setAlertInternal(a),a.autoClose&&setTimeout((function(){return t.removeAlert(a)}),3500);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),success:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.type=p,e.next=3,t.alert(a);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),error:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.type=b,e.next=3,t.alert(a);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),info:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.type=v,e.next=3,t.alert(a);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),warn:Object(h.d)(function(){var e=Object(N.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.type=E,e.next=3,t.alert(a);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}},q=Object(h.c)(T),F=a(19);function U(e){e.id,e.fade;var t=Object(h.f)((function(e){return e.iStore.alerts})),a=Object(h.e)((function(e){return e.iStore.removeAlert}));function n(e){var t;if(e){var a=["alert","alert-dismissable"],n=(t={},Object(F.a)(t,p,"alert alert-success"),Object(F.a)(t,b,"alert alert-danger"),Object(F.a)(t,v,"alert alert-info"),Object(F.a)(t,E,"alert alert-warning"),t);return a.push(n[e.type]),e.fade&&a.push("fade"),a.join(" ")}}return t.length?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"m-3"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:n(e)},r.a.createElement("button",{className:"close",onClick:function(){return a(e)}},"\xd7"),r.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.message}}))})))):null}U.defaultProps={id:"default-alert",fade:!0};var _=a(7);function R(){var e=Object(h.f)((function(e){return e.aStore.account})),t=Object(h.e)((function(e){return e.aStore.logout}));return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-info larger"},r.a.createElement("div",{className:"navbar-nav mr-auto"},r.a.createElement(_.b,{exact:!0,to:"/",className:"nav-item nav-link"},"Home"),r.a.createElement(_.b,{exact:!0,to:"/content",className:"nav-item nav-link"},"Documentation"),r.a.createElement("a",{className:"nav-item nav-link",href:"http://localhost:4000/api-docs",target:"_blank"},"API-Documentation"),r.a.createElement(_.b,{to:"/profile",className:"nav-item nav-link"},"Profile"),e&&e.role===f&&r.a.createElement(_.b,{to:"/admin",className:"nav-item nav-link"},"Admin")),r.a.createElement("div",{className:"navbar-nav ml-auto"},e&&r.a.createElement("span",{className:"navbar-text mr-4"},"User: ",e.userName),e&&r.a.createElement("a",{onClick:function(){return t()},className:"nav-item nav-link "},"Logout"),!e&&r.a.createElement("a",{className:"nav-item nav-link",onClick:function(){return d.push("/account/login")},variant:"outline-success"},"Login"))),r.a.createElement(c.b,{path:"/admin",component:V}))}function V(e){var t=e.match.path;return r.a.createElement("nav",{className:"admin-nav navbar navbar-expand navbar-light"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(_.b,{to:"".concat(t,"/users"),className:"nav-item nav-link"},"Users")))}var I=a(129);function D(e){var t=e.component,a=e.roles,n=Object(I.a)(e,["component","roles"]),o=Object(h.f)((function(e){return e.aStore.account}));return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return console.log("Private Route"),o?a&&-1===a.indexOf(o.role)?r.a.createElement(c.a,{to:{pathname:"/"}}):r.a.createElement(t,e):r.a.createElement(c.a,{to:{pathname:"/account/login",state:{from:e.location}}})}}))}function B(){return r.a.createElement("div",{className:"m-4"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"mb-4  display-4"},"Reference App MERN-Stack"),r.a.createElement("h3",null,"A simple app to manage technical documentation."),r.a.createElement("div",{className:"larger"},r.a.createElement("p",null,"It is the purpose of this application to be used as a correct and well coded example of the implementation of a CRUD application with autherization and messaging system."),r.a.createElement("p",null,"If your are building an app you can always go to this app an find a good and working implementation of the basic functionality needed to build such an app.")),r.a.createElement("h3",null,"Functionality of the App"),r.a.createElement("ul",{className:"larger feature"},r.a.createElement("li",null,"The documentation pages can be entered in the markdown syntax, which supports many formatting options including including pictures in the documents. Pictures can be uploaded and included into the documentation."),r.a.createElement("li",null,"The authorization includes login, sign-up, email verification, password reset, user-roles, user can edit their profile and an administrator can add, edit and delete all the users."),r.a.createElement("li",null,"The application is built on the Redux pattern and uses Easy-Peasy to implement it"),r.a.createElement("li",null,"For each documentation page the users can leave comments."),r.a.createElement("li",null,"A User can view all the pages even when he is not logged in. A user must me logged in to leave a comment."),r.a.createElement("li",null,"A user can edit and/or delete his comments but can not edit or delete comments made by other users"),r.a.createElement("li",null,"Pages can be added, edited and deleted only by users who belong to the admin group."),r.a.createElement("li",null,"Pages can be added, edited and deleted only by users who belong to the admin group."),r.a.createElement("li",null,"An administrator can edit and delete comments even if they were made by another user."),r.a.createElement("li",null,"The swagger documentation of the underlying api can be accessed via the menu."))))}function L(e){var t=e.match,a=Object(h.f)((function(e){return e.aStore.account})),n=t.path;return r.a.createElement("div",null,r.a.createElement("h1",null,"My Profile"),r.a.createElement("p",null,r.a.createElement("strong",null,"Name: ")," ",a.userName,r.a.createElement("br",null),r.a.createElement("strong",null,"Email: ")," ",a.email),r.a.createElement("p",null,r.a.createElement(_.a,{to:"".concat(n,"/update")},"Update Profile")))}var M=a(12),J=a(4),H=a(10);function z(e){var t=e.history,a=Object(h.f)((function(e){return e.aStore.account})),c=Object(h.e)((function(e){return e.aStore.updateAccount})),o=Object(h.e)((function(e){return e.aStore.deleteAccount})),s=Object(h.e)((function(e){return e.iStore.success})),l=Object(h.e)((function(e){return e.iStore.error})),i={userName:a.userName,email:a.email,password:"",confirmPassword:""},u=H.a().shape({userName:H.c().required("Username is required"),email:H.c().email("Email is invalid").required("Email is required"),password:H.c().min(6,"Password must be at least 6 characters"),confirmPassword:H.c().when("password",(function(e,t){if(e)return t.required("Confirm Password is required")})).oneOf([H.b("password")],"Passwords must match")});var m=Object(n.useState)(!1),d=Object(M.a)(m,2),f=d[0],p=d[1];return r.a.createElement(J.d,{initialValues:i,validationSchema:u,onSubmit:function(e,n){var r=n.setStatus,o=n.setSubmitting;r(),console.log(a.id),console.log(e),c({id:a.id,params:e}).then((function(){s({message:"Update successful",options:{keepAfterRouteChange:!0}}),t.push(".")})).catch((function(e){o(!1),l({message:e})}))}},(function(e){var t=e.errors,n=e.touched,c=e.isSubmitting;return r.a.createElement(J.c,null,r.a.createElement("h1",null,"Update Profile"),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Username"),r.a.createElement(J.b,{name:"userName",type:"text",className:"form-control"+(t.userName&&n.userName?" is-invalid":"")}),r.a.createElement(J.a,{name:"userName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(J.b,{name:"email",type:"text",className:"form-control"+(t.email&&n.email?" is-invalid":"")}),r.a.createElement(J.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("h3",{className:"pt-3"},"Change Password"),r.a.createElement("p",null,"Leave blank to keep the same password"),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Password"),r.a.createElement(J.b,{name:"password",type:"password",className:"form-control"+(t.password&&n.password?" is-invalid":"")}),r.a.createElement(J.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(J.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&n.confirmPassword?" is-invalid":"")}),r.a.createElement(J.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",disabled:c,className:"btn btn-primary mr-2"},c&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Update"),r.a.createElement("button",{type:"button",onClick:function(){window.confirm("Are you sure?")&&(p(!0),o(a.id).then((function(){return s("Account deleted successfully")})))},className:"btn btn-danger",style:{width:"75px"},disabled:f},f?r.a.createElement("span",{className:"spinner-border spinner-border-sm"}):r.a.createElement("span",null,"Delete")),r.a.createElement(_.a,{to:".",className:"btn btn-link"},"Cancel")))}))}function W(e){var t=e.match.path;return r.a.createElement("div",{className:"p-4"},r.a.createElement("div",{className:"container"},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:t,component:L}),r.a.createElement(c.b,{path:"".concat(t,"/update"),component:z}))))}function G(e){var t=e.match.path;return r.a.createElement("div",null,r.a.createElement("h1",null,"Admin"),r.a.createElement("p",null,"This section can only be accessed by administrators."),r.a.createElement("p",null,r.a.createElement(_.a,{to:"".concat(t,"/users")},"Manage Users")))}function K(e){var t=e.match,a=Object(h.f)((function(e){return e.aStore.accounts})),o=Object(h.e)((function(e){return e.aStore.getAllAccounts})),s=Object(h.e)((function(e){return e.aStore.setEditAccount})),l=Object(h.e)((function(e){return e.aStore.deleteAccount})),i=t.path,u=Object(c.g)();return Object(n.useEffect)((function(){o()}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Users"),r.a.createElement("p",null,"All users from secure (admin only) api end point:"),r.a.createElement(_.a,{to:"".concat(i,"/add"),className:"btn btn-sm btn-success mb-2"},"Add User"),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"30%"}},"Username"),r.a.createElement("th",{style:{width:"30%"}},"Email"),r.a.createElement("th",{style:{width:"30%"}},"Role"),r.a.createElement("th",{style:{width:"10%"}}))),r.a.createElement("tbody",null,a&&a.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.userName),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.role),r.a.createElement("td",{style:{whiteSpace:"nowrap"}},r.a.createElement("button",{onClick:function(){return function(e){s(e),u.push("".concat(i,"/edit/").concat(e.id))}(e)},style:{width:"60px"},className:"btn btn-sm btn-primary mr-1"},"Edit"),r.a.createElement("button",{onClick:function(){return t=e.id,void l(t);var t},className:"btn btn-sm btn-danger",style:{width:"60px"},disabled:e.isDeleting},e.isDeleting?r.a.createElement("span",{className:"spinner-border spinner-border-sm"}):r.a.createElement("span",null,"Delete"))))})),!a&&r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4",className:"text-center"},r.a.createElement("span",{className:"spinner-border spinner-border-lg align-center"}))))))}function Q(e){var t=e.history,a=e.match,c=Object(h.f)((function(e){return e.aStore.editAccount})),o=Object(h.e)((function(e){return e.aStore.createAccount})),s=Object(h.e)((function(e){return e.aStore.updateAccount})),l=Object(h.e)((function(e){return e.aStore.getAccountById})),i=Object(h.e)((function(e){return e.iStore.success})),u=Object(h.e)((function(e){return e.iStore.error})),m=a.params.id,d=!m;Object(n.useEffect)((function(){d||l(m)}),[]);var f={userName:null===c||void 0===c?void 0:c.userName,email:null===c||void 0===c?void 0:c.email,role:null===c||void 0===c?void 0:c.role,password:"",confirmPassword:""},p=d?{userName:"",email:"",role:"",password:"",confirmPassword:""}:f,b=H.a().shape({userName:H.c().required("Username is required"),email:H.c().email("Email is invalid").required("Email is required"),role:H.c().required("Role is required"),password:H.c().concat(d?H.c().required("Password is required"):null).min(6,"Password must be at least 6 characters"),confirmPassword:H.c().when("password",(function(e,t){if(e)return t.required("Confirm Password is required")})).oneOf([H.b("password")],"Passwords must match")});return r.a.createElement(J.d,{initialValues:p,validationSchema:b,onSubmit:function(e,a){var n=a.setStatus,r=a.setSubmitting;n(),d?function(e,a){o(e).then((function(){i({message:"User added successfully",keepAfterRouteChange:!0}),t.push(".")})).catch((function(e){a(!1),u({message:e})}))}(e,r):function(e,a,n){s({id:e,params:a}).then((function(){i({message:"Update successful",keepAfterRouteChange:!0}),t.push("..")})).catch((function(e){n(!1),u({message:e})}))}(m,e,r)}},(function(e){var t=e.errors,a=e.touched,n=e.isSubmitting;e.setFieldValue;return r.a.createElement(J.c,null,r.a.createElement("h1",null,d?"Add User":"Edit User"),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"User Name"),r.a.createElement(J.b,{name:"userName",type:"text",className:"form-control"+(t.userName&&a.userName?" is-invalid":"")}),r.a.createElement(J.a,{name:"userName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-7"},r.a.createElement("label",null,"Email"),r.a.createElement(J.b,{name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(J.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Role"),r.a.createElement(J.b,{name:"role",as:"select",className:"form-control"+(t.role&&a.role?" is-invalid":"")},r.a.createElement("option",{value:""}),r.a.createElement("option",{value:"User"},"User"),r.a.createElement("option",{value:"Admin"},"Admin")),r.a.createElement(J.a,{name:"role",component:"div",className:"invalid-feedback"}))),!d&&r.a.createElement("div",null,r.a.createElement("h3",{className:"pt-3"},"Change Password"),r.a.createElement("p",null,"Leave blank to keep the same password")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Password"),r.a.createElement(J.b,{name:"password",type:"password",className:"form-control"+(t.password&&a.password?" is-invalid":"")}),r.a.createElement(J.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(J.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&a.confirmPassword?" is-invalid":"")}),r.a.createElement(J.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",disabled:n,className:"btn btn-primary"},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Save"),r.a.createElement(_.a,{to:d?".":"..",className:"btn btn-link"},"Cancel")))}))}function X(e){var t=e.match.path;return r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:t,component:K}),r.a.createElement(c.b,{path:"".concat(t,"/add"),component:Q}),r.a.createElement(c.b,{path:"".concat(t,"/edit/:id"),component:Q}))}function Y(e){var t=e.match.path;return r.a.createElement("div",{className:"p-4"},r.a.createElement("div",{className:"container"},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:t,component:G}),r.a.createElement(c.b,{path:"".concat(t,"/users"),component:X}))))}function Z(e){var t=e.history,a=e.location,n=Object(h.e)((function(e){return e.aStore.login})),c=Object(h.e)((function(e){return e.iStore.error})),o=Object(h.e)((function(e){return e.iStore.clear})),s=H.a().shape({email:H.c().email("Email is invalid").required("Email is required"),password:H.c().required("Password is required")});return r.a.createElement(J.d,{initialValues:{email:"",password:""},validationSchema:s,onSubmit:function(e,r){var s=e.email,l=e.password,i=r.setSubmitting;o(),console.log(s),n({email:s,password:l}).then((function(){var e=(a.state||{from:{pathname:"/"}}).from;t.push(e)})).catch((function(e){i(!1),c({message:e})}))}},(function(e){var t=e.errors,a=e.touched,n=e.isSubmitting;return r.a.createElement(J.c,null,r.a.createElement("h3",{className:"card-header"},"Login"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(J.b,{name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(J.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement(J.b,{name:"password",type:"password",className:"form-control"+(t.password&&a.password?" is-invalid":"")}),r.a.createElement(J.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("button",{type:"submit",disabled:n,className:"btn btn-primary"},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"),r.a.createElement(_.a,{to:"register",className:"btn btn-link"},"Register")),r.a.createElement("div",{className:"form-group col text-right"},r.a.createElement(_.a,{to:"forgot-password",className:"btn btn-link pr-0"},"Forgot Password?")))))}))}function $(e){var t=e.history,a=Object(h.e)((function(e){return e.aStore.register})),n=Object(h.e)((function(e){return e.iStore.success})),c=Object(h.e)((function(e){return e.iStore.error})),o=H.a().shape({userName:H.c().required("Username is required"),email:H.c().email("Email is invalid").required("Email is required"),password:H.c().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:H.c().oneOf([H.b("password"),null],"Passwords must match").required("Confirm Password is required")});return r.a.createElement(J.d,{initialValues:{title:"",firstName:"",lastName:"",email:"",password:"",confirmPassword:"",acceptTerms:!1},validationSchema:o,onSubmit:function(e,r){var o=r.setStatus,s=r.setSubmitting;o(),a(e).then((function(){n({message:"Registration successful, please check your email for verification instructions",keepAfterRouteChange:!0}),t.push("login")})).catch((function(e){s(!1),c({message:e})}))}},(function(e){var t=e.errors,a=e.touched,n=e.isSubmitting;return r.a.createElement(J.c,null,r.a.createElement("h3",{className:"card-header"},"Register"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Username"),r.a.createElement(J.b,{name:"userName",type:"text",className:"form-control"+(t.userName&&a.userName?" is-invalid":"")}),r.a.createElement(J.a,{name:"userName",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(J.b,{name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(J.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Password"),r.a.createElement(J.b,{name:"password",type:"password",className:"form-control"+(t.password&&a.password?" is-invalid":"")}),r.a.createElement(J.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group col"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(J.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&a.confirmPassword?" is-invalid":"")}),r.a.createElement(J.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",disabled:n,className:"btn btn-primary"},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Register"),r.a.createElement(_.a,{to:"login",className:"btn btn-link"},"Cancel"))))}))}var ee=a(87),te=a.n(ee);function ae(e){var t=e.history,a=Object(h.e)((function(e){return e.aStore.verifyEmail})),c=Object(h.e)((function(e){return e.iStore.success})),o="Verifying",s="Failed",l=Object(n.useState)(o),i=Object(M.a)(l,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){var e=te.a.parse(window.location.search).token;t.replace(window.location.pathname),a(e).then((function(){c({message:"Verification successful, you can now login",keepAfterRouteChange:!0}),t.push("login")})).catch((function(){m(s)}))}),[]),r.a.createElement("div",null,r.a.createElement("h3",{className:"card-header"},"Verify Email"),r.a.createElement("div",{className:"card-body"},function(){switch(u){case o:return r.a.createElement("div",null,"Verifying...");case s:return r.a.createElement("div",null,"Verification failed, you can also verify your account using the"," ",r.a.createElement(_.a,{to:"forgot-password"},"forgot password")," page.");default:return r.a.createElement(r.a.Fragment,null)}}()))}function ne(){var e=Object(h.e)((function(e){return e.aStore.forgotPassword})),t=Object(h.e)((function(e){return e.iStore.success})),a=Object(h.e)((function(e){return e.iStore.error})),n=Object(h.e)((function(e){return e.iStore.clear})),c=H.a().shape({email:H.c().email("Email is invalid").required("Email is required")});return r.a.createElement(J.d,{initialValues:{email:""},validationSchema:c,onSubmit:function(r,c){var o=r.email,s=c.setSubmitting;n(),e(o).then((function(){return t({message:"Please check your email for password reset instructions"})})).catch((function(e){return a({message:e})})).finally((function(){return s(!1)}))}},(function(e){var t=e.errors,a=e.touched,n=e.isSubmitting;return r.a.createElement(J.c,null,r.a.createElement("h3",{className:"card-header"},"Forgot Password"),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement(J.b,{name:"email",type:"text",className:"form-control"+(t.email&&a.email?" is-invalid":"")}),r.a.createElement(J.a,{name:"email",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("button",{type:"submit",disabled:n,className:"btn btn-primary"},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Submit"),r.a.createElement(_.a,{to:"login",className:"btn btn-link"},"Cancel")))))}))}function re(e){var t=e.history,a=Object(h.e)((function(e){return e.aStore.validateResetToken})),c=Object(h.e)((function(e){return e.iStore.success})),o=Object(h.e)((function(e){return e.iStore.error})),s=Object(h.e)((function(e){return e.iStore.clear})),l=Object(h.e)((function(e){return e.aStore.resetPassword})),i="Validating",u="Valid",m="Invalid",d=Object(n.useState)(null),f=Object(M.a)(d,2),p=f[0],b=f[1],v=Object(n.useState)(i),E=Object(M.a)(v,2),g=E[0],w=E[1];return Object(n.useEffect)((function(){var e=te.a.parse(window.location.search).token;t.replace(window.location.pathname),a(e).then((function(){b(e),w(u)})).catch((function(){w(m)}))}),[]),r.a.createElement("div",null,r.a.createElement("h3",{className:"card-header"},"Reset Password"),r.a.createElement("div",{className:"card-body"},function(){switch(g){case u:return function(){var e=H.a().shape({password:H.c().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:H.c().oneOf([H.b("password"),null],"Passwords must match").required("Confirm Password is required")});return r.a.createElement(J.d,{initialValues:{password:"",confirmPassword:""},validationSchema:e,onSubmit:function(e,a){var n=e.password,r=e.confirmPassword,i=a.setSubmitting;s(),l({token:p,password:n,confirmPassword:r}).then((function(){c({message:"Password reset successful, you can now login",options:{keepAfterRouteChange:!0}}),t.push("login")})).catch((function(e){i(!1),o({message:e})}))}},(function(e){var t=e.errors,a=e.touched,n=e.isSubmitting;return r.a.createElement(J.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement(J.b,{name:"password",type:"password",className:"form-control"+(t.password&&a.password?" is-invalid":"")}),r.a.createElement(J.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement(J.b,{name:"confirmPassword",type:"password",className:"form-control"+(t.confirmPassword&&a.confirmPassword?" is-invalid":"")}),r.a.createElement(J.a,{name:"confirmPassword",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement("button",{type:"submit",disabled:n,className:"btn btn-primary"},n&&r.a.createElement("span",{className:"spinner-border spinner-border-sm mr-1"}),"Reset Password"),r.a.createElement(_.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}))}();case m:return r.a.createElement("div",null,"Token validation failed, if the token has expired you can get a new one at the ",r.a.createElement(_.a,{to:"forgot-password"},"forgot password")," page.");case i:return r.a.createElement("div",null,"Validating token...");default:return r.a.createElement(r.a.Fragment,null)}}()))}function ce(e){var t=e.history,a=e.match.path,o=Object(h.f)((function(e){return e.aStore.account}));return Object(n.useEffect)((function(){o&&t.push("/")}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 offset-sm-2 mt-5"},r.a.createElement("div",{className:"card m-3"},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"".concat(a,"/login"),component:Z}),r.a.createElement(c.b,{path:"".concat(a,"/register"),component:$}),r.a.createElement(c.b,{path:"".concat(a,"/verify-email"),component:ae}),r.a.createElement(c.b,{path:"".concat(a,"/forgot-password"),component:ne}),r.a.createElement(c.b,{path:"".concat(a,"/reset-password"),component:re}))))))}var oe=a(37);function se(e){var t=e.page,a=Object(c.g)();return console.log(t),r.a.createElement(oe.a,{className:"mb-3 mx-5 p-3",onClick:function(){return a.push("/topic/"+t.slug)}},r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,t.title),r.a.createElement(oe.a.Subtitle,null,t.subtitle)))}var le=a(63),ie=a(88),ue=a(74),me=a(30);function de(){var e=Object(h.f)((function(e){return e.pStore.pages})),t=Object(h.e)((function(e){return e.pStore.createPage})),a=Object(c.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"float-right btn btn-light",onClick:function(){t(),a.push("/topic/newPage")}},r.a.createElement(me.a,null)),r.a.createElement(le.a,{className:"w-auto mt-5 "},r.a.createElement("h2",{className:"mb-3 ml-5"},"Documentation"),e.map((function(e){return r.a.createElement(ie.a,{key:e._id},r.a.createElement(ue.a,null,r.a.createElement(se,{page:e})))}))))}var fe=a(89),pe=a.n(fe);function be(e){var t=e.data,a=Object(c.g)(),n=Object(h.f)((function(e){return e.pStore.page})),o=Object(h.f)((function(e){return e.aStore.account})),s=Object(h.e)((function(e){return e.pStore.editComment})),l=Object(h.e)((function(e){return e.pStore.deleteComment}));return r.a.createElement(oe.a,{className:"mb-3"},r.a.createElement(oe.a.Body,null,r.a.createElement(oe.a.Title,null,"Comment by ",t.userName),r.a.createElement(oe.a.Text,null,t.content),!o||o.id!==t.userId&&"Admin"!==o.role?null:r.a.createElement("div",{className:"float-right"},r.a.createElement("button",{className:"btn btn-light",onClick:function(){s(t),a.push("/comment")}},r.a.createElement(me.c,null))," ",r.a.createElement("button",{className:"btn btn-light",onClick:function(){l(t),a.push("/topic/"+n.slug)}},r.a.createElement(me.b,null))," ")))}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.comments;return r.a.createElement(r.a.Fragment,null,t.map((function(e){return r.a.createElement(be,{key:e._id,data:e})})))}function Ee(){var e=Object(h.f)((function(e){return e.pStore.page})),t=Object(h.f)((function(e){return e.aStore.account})),a=Object(h.e)((function(e){return e.pStore.createComment})),n=Object(c.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,e.title),r.a.createElement(pe.a,{source:e.content,escapeHtml:!1,className:"mb-4"}),r.a.createElement("div",{className:"mt-5"}),r.a.createElement("hr",{className:"mt-3 mb-3"}),r.a.createElement("div",null,r.a.createElement(ie.a,null,r.a.createElement(ue.a,null,r.a.createElement("h4",{className:"mt-5"},"Comments")),t?r.a.createElement(ue.a,null,r.a.createElement("button",{className:"float-right btn btn-light",onClick:function(){a(t),n.push("/comment")}},r.a.createElement(me.a,null))):null)),r.a.createElement(ve,{className:"float-none",comments:e.comments?e.comments:[]}))}var he=a(128);function ge(e){var t=e.val,a=e.updatedValue;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{value:t,height:"300",onChange:function(e,t,n){a.current=n}}))}var we=a(90),Ne=function(){var e=Object(n.useState)(),t=Object(M.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("Choose image to upload"),s=Object(M.a)(o,2),l=s[0],i=s[1],u=Object(h.e)((function(e){return e.iStore.success})),m=function(){var e=Object(N.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("file",a),console.log(n),e.next=6,C.uploadFile(n);case 6:r=e.sent,u({message:r,autoClose:!1}),i("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:m,encType:"multipart/form-data"},r.a.createElement("div",{className:"custom-file "},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){console.log(e.target.files[0]),c(e.target.files[0]),i(e.target.files[0].name)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},l)),r.a.createElement("input",{type:"submit",value:"Upload",className:"btn,  btn-light btn-block mt-3  float-left"}))};function je(e){var t=e.page,a=Object(h.e)((function(e){return e.pStore.updatePageContent})),c={title:"",slug:"",subtitle:""},o=Object(we.a)({defaultValues:c}),s=o.register,l=o.handleSubmit,i=Object(n.useRef)();if(!t)return r.a.createElement("div",null,"loading");c.title=t.title,c.subtitle=t.subtitle,c.slug=t.slug;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:l((function(e){var n={_id:t._id,slug:e.slug,title:e.title,subtitle:e.subtitle,content:null===i||void 0===i?void 0:i.current};console.log(n),a(n)}))},r.a.createElement("button",{type:"submit",className:"btn btn-light float-right "},r.a.createElement(me.d,null)),r.a.createElement("div",{className:"form-group input-group-lg"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{id:"title",className:"form-control",name:"title",type:"text",ref:s})),r.a.createElement("div",{className:"form-group "},r.a.createElement("label",{htmlFor:"slug"},"Slug"),r.a.createElement("input",{id:"slug",className:"form-control",name:"slug",type:"text",ref:s})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Subtitle"),r.a.createElement("textarea",{id:"subtitle",rows:"4",name:"subtitle",className:"form-control",ref:s})),r.a.createElement("div",{className:"form-group"}," ",r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement(ge,{id:"content",val:t.content,updatedValue:i})," ")),r.a.createElement(Ne,{className:"m-3"}))}var Oe=a(69),ye=a(110);function ke(){var e=Object(c.i)().slug,t=Object(h.f)((function(e){return e.pStore.page})),a=Object(h.f)((function(e){return e.aStore.account})),o=Object(h.e)((function(e){return e.pStore.loadPage})),s=Object(h.e)((function(e){return e.pStore.deletePage})),l=Object(n.useState)("show"),i=Object(M.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(),f=Object(M.a)(d,2),p=f[0],b=f[1],v=Object(c.g)();if(Object(n.useEffect)((function(){"NewPage"!==e?o(e):m("edit")}),[]),!t)return r.a.createElement("div",null,"still loading");return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{className:"w-auto mt-5 "},"Admin"===(null===a||void 0===a?void 0:a.role)?r.a.createElement("div",{className:"float-right"},"show"===u?r.a.createElement("button",{className:"btn btn-light",onClick:function(){p||b(!0)}},r.a.createElement(me.b,null)):null,r.a.createElement("button",{className:"btn btn-light",onClick:function(){m("edit"!==u?"edit":"show")}},r.a.createElement(me.c,null))):null,"show"===u?r.a.createElement(Ee,null):null,"edit"===u?r.a.createElement(je,{page:t}):null),r.a.createElement(Oe.a,{show:p,onHide:function(){return b(!1)}},r.a.createElement(Oe.a.Header,{closeButton:!0},r.a.createElement(Oe.a.Title,null,"Confirmation")),r.a.createElement(Oe.a.Body,null,"Do you really want to delete this page?"),r.a.createElement(Oe.a.Footer,null,r.a.createElement(ye.a,{variant:"secondary",onClick:function(){return b(!1)}},"Cancel"),r.a.createElement(ye.a,{variant:"primary",onClick:function(){s(t),b(!1),v.push("/content")}},"Delete"))))}function Se(){var e=Object(h.f)((function(e){return e.pStore.comment})),t=Object(h.f)((function(e){return e.pStore.page})),a=Object(h.e)((function(e){return e.pStore.saveComment})),n=Object(h.e)((function(e){return e.pStore.clearComment})),o=Object(c.g)(),l={content:null===e||void 0===e?void 0:e.content},i=Object(we.a)({defaultValues:l}),u=i.register,m=i.handleSubmit;return r.a.createElement(le.a,{className:"w-auto mt-5 "},r.a.createElement("h3",null,"Edit Comment"),r.a.createElement("form",{onSubmit:m((function(n){var r=Object(s.a)(Object(s.a)({},e),{},{content:n.content});a(r),o.push("/topic/"+t.slug)}))},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"content"},"Comment"),r.a.createElement("textarea",{id:"content",rows:"4",name:"content",className:"form-control",ref:u})),r.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-primary"}),r.a.createElement("button",{onClick:function(){n(),o.push("/topic/"+t.slug)},className:"btn btn-secondary ml-2 "},"Cancel"," ")))}function xe(){var e=Object(c.h)().pathname,t=Object(h.e)((function(e){return e.pStore.loadPages})),a=Object(h.f)((function(e){return e.aStore.refreshToken})),o=Object(h.e)((function(e){return e.aStore.refreshTheToken}));return Object(n.useEffect)((function(){var e;if(a){var t=JSON.parse(atob(a.split(".")[1])),n=new Date(1e3*t.exp).getTime()-Date.now()-6e4;e=setTimeout((function(){o()}),n)}return function(){return clearTimeout(e)}}),[a,o]),Object(n.useEffect)((function(){o(),t()}),[]),r.a.createElement("div",{className:"app-container bg-light"},r.a.createElement(R,null),r.a.createElement(U,null),r.a.createElement(c.d,null,r.a.createElement(c.a,{from:"/:url*(/+)",to:e.slice(0,-1)}),r.a.createElement(c.b,{exact:!0,path:"/",component:B}),r.a.createElement(c.b,{exact:!0,path:"/content",component:de}),r.a.createElement(c.b,{path:"/topic/:slug",component:ke}),r.a.createElement(D,{path:"/profile",component:W}),r.a.createElement(D,{path:"/admin",roles:[f],component:Y}),r.a.createElement(c.b,{path:"/account",component:ce}),r.a.createElement(c.b,{path:"/comment",component:Se})))}a(442);Object(o.render)(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h.a,{store:q},r.a.createElement(c.c,{history:d},r.a.createElement(xe,null)))),document.getElementById("app"))}},[[130,1,2]]]);
//# sourceMappingURL=main.5bd535f0.chunk.js.map